{% extends "api_base.html" %}

{% block title %}Financial Services - EDU SPARK{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
<style>
    .financial-page {
        min-height: 100vh;
        background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);
        padding: 80px 0 40px;
    }

    .financial-header {
        text-align: center;
        margin-bottom: 50px;
    }

    .financial-header h1 {
        font-size: 3rem;
        font-weight: 800;
        color: var(--primary-dark);
        margin-bottom: 1rem;
    }

    .financial-header p {
        font-size: 1.2rem;
        color: var(--text-light);
        max-width: 800px;
        margin: 0 auto;
    }

    .services-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 30px;
        margin-bottom: 50px;
    }

    .service-card {
        background: white;
        border-radius: 25px;
        padding: 35px;
        box-shadow: var(--container-shadow);
        transition: var(--hover-transition);
        border: 1px solid rgba(52, 152, 219, 0.1);
        position: relative;
        overflow: hidden;
    }

    .service-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: var(--gradient-primary);
    }

    .service-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 25px 50px rgba(52, 152, 219, 0.15);
    }

    .service-icon {
        width: 80px;
        height: 80px;
        background: linear-gradient(135deg, #3498db, #2980b9);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 2.5rem;
        margin-bottom: 25px;
    }

    .service-title {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--dark-color);
        margin-bottom: 15px;
    }

    .service-description {
        color: var(--text-light);
        line-height: 1.6;
        margin-bottom: 25px;
    }

    .service-features {
        list-style: none;
        padding: 0;
        margin-bottom: 25px;
    }

    .service-features li {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
        color: var(--text-light);
    }

    .service-features i {
        color: var(--success-color);
        font-size: 0.9rem;
    }

    .service-btn {
        width: 100%;
        background: linear-gradient(135deg, #3498db, #2980b9);
        color: white;
        border: none;
        padding: 15px;
        border-radius: 15px;
        font-weight: 600;
        font-size: 1.1rem;
        cursor: pointer;
        transition: var(--hover-transition);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }

    .service-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--soft-shadow);
    }

    .loan-calculator {
        background: white;
        border-radius: 25px;
        padding: 35px;
        box-shadow: var(--container-shadow);
        margin-bottom: 40px;
    }

    .calculator-header {
        text-align: center;
        margin-bottom: 30px;
    }

    .calculator-header h3 {
        font-size: 2rem;
        font-weight: 700;
        color: var(--primary-dark);
        margin-bottom: 10px;
    }

    .calculator-form {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 25px;
        margin-bottom: 30px;
    }

    .form-group {
        display: flex;
        flex-direction: column;
    }

    .form-label {
        font-weight: 600;
        color: var(--dark-color);
        margin-bottom: 8px;
    }

    .form-control {
        padding: 15px;
        border: 2px solid var(--border-color);
        border-radius: 12px;
        font-size: 1rem;
        transition: var(--hover-transition);
    }

    .form-control:focus {
        outline: none;
        border-color: #3498db;
        box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }

    .calculation-result {
        background: linear-gradient(135deg, #e8f6ff, #d4edff);
        border-radius: 20px;
        padding: 30px;
        text-align: center;
        border: 1px solid rgba(52, 152, 219, 0.2);
    }

    .result-amount {
        font-size: 3rem;
        font-weight: 800;
        color: #2980b9;
        margin-bottom: 10px;
    }

    .result-label {
        font-size: 1.2rem;
        color: var(--text-light);
        margin-bottom: 20px;
    }

    .result-breakdown {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 20px;
        margin-top: 25px;
    }

    .breakdown-item {
        background: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: var(--soft-shadow);
    }

    .breakdown-value {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 5px;
    }

    .breakdown-label {
        color: var(--text-light);
        font-size: 0.9rem;
    }

    .financial-tips {
        background: white;
        border-radius: 25px;
        padding: 35px;
        box-shadow: var(--container-shadow);
        margin-bottom: 40px;
    }

    .tips-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 25px;
    }

    .tips-icon {
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #f39c12, #e67e22);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.8rem;
    }

    .tips-title {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--dark-color);
    }

    .tips-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
    }

    .tip-card {
        background: linear-gradient(135deg, #fff8e7, #fef4e4);
        padding: 25px;
        border-radius: 15px;
        border-left: 5px solid #f39c12;
    }

    .tip-title {
        font-weight: 700;
        color: var(--dark-color);
        margin-bottom: 10px;
    }

    .tip-content {
        color: var(--text-light);
        line-height: 1.6;
    }

    .insurance-plans {
        background: white;
        border-radius: 25px;
        padding: 35px;
        box-shadow: var(--container-shadow);
        margin-bottom: 40px;
    }

    .plans-header {
        text-align: center;
        margin-bottom: 40px;
    }

    .plans-header h3 {
        font-size: 2rem;
        font-weight: 700;
        color: var(--primary-dark);
        margin-bottom: 10px;
    }

    .plans-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
    }

    .plan-card {
        background: linear-gradient(135deg, #f8fff8, #f0f8f0);
        border-radius: 20px;
        padding: 30px;
        border: 2px solid rgba(46, 204, 113, 0.1);
        transition: var(--hover-transition);
        position: relative;
    }

    .plan-card:hover {
        transform: translateY(-5px);
        border-color: rgba(46, 204, 113, 0.3);
    }

    .plan-card.featured {
        border-color: #2ecc71;
        background: linear-gradient(135deg, #e8f8f5, #d5f4e6);
    }

    .plan-card.featured::before {
        content: 'Most Popular';
        position: absolute;
        top: -10px;
        left: 50%;
        transform: translateX(-50%);
        background: #2ecc71;
        color: white;
        padding: 5px 20px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
    }

    .plan-name {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--dark-color);
        margin-bottom: 15px;
    }

    .plan-price {
        font-size: 2.5rem;
        font-weight: 800;
        color: #2ecc71;
        margin-bottom: 20px;
    }

    .plan-price .period {
        font-size: 1rem;
        color: var(--text-light);
        font-weight: 500;
    }

    .plan-features {
        list-style: none;
        padding: 0;
        margin-bottom: 25px;
    }

    .plan-features li {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 12px;
        color: var(--text-light);
    }

    .plan-features i {
        color: #2ecc71;
        font-size: 0.9rem;
    }

    .plan-btn {
        width: 100%;
        background: linear-gradient(135deg, #2ecc71, #27ae60);
        color: white;
        border: none;
        padding: 15px;
        border-radius: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: var(--hover-transition);
    }

    .plan-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--soft-shadow);
    }

    .government-schemes {
        background: white;
        border-radius: 25px;
        padding: 35px;
        box-shadow: var(--container-shadow);
    }

    .schemes-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 30px;
    }

    .schemes-icon {
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #9b59b6, #8e44ad);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.8rem;
    }

    .schemes-title {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--dark-color);
    }

    .schemes-list {
        display: grid;
        gap: 20px;
    }

    .scheme-item {
        background: linear-gradient(135deg, #f8f4ff, #f0e8ff);
        padding: 25px;
        border-radius: 15px;
        border-left: 5px solid #9b59b6;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .scheme-info h6 {
        font-weight: 700;
        color: var(--dark-color);
        margin-bottom: 8px;
    }

    .scheme-info p {
        color: var(--text-light);
        margin: 0;
        font-size: 0.9rem;
    }

    .scheme-btn {
        background: linear-gradient(135deg, #9b59b6, #8e44ad);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: var(--hover-transition);
        white-space: nowrap;
    }

    .scheme-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--soft-shadow);
    }

    @media (max-width: 768px) {
        .financial-header h1 {
            font-size: 2rem;
        }

        .services-grid {
            grid-template-columns: 1fr;
        }

        .calculator-form {
            grid-template-columns: 1fr;
        }

        .result-breakdown {
            grid-template-columns: 1fr 1fr;
        }

        .tips-grid {
            grid-template-columns: 1fr;
        }

        .plans-grid {
            grid-template-columns: 1fr;
        }

        .scheme-item {
            flex-direction: column;
            text-align: center;
            gap: 15px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="financial-page">
    <div class="container">
        <!-- Header -->
        <div class="financial-header animate__animated animate__fadeInDown">
            <h1><i class="fas fa-chart-line"></i> Financial Services</h1>
            <p>Comprehensive financial solutions for farmers - from crop loans to insurance, government schemes to investment planning. Secure your agricultural future with our expert financial services.</p>
        </div>

        <!-- Main Services Grid -->
        <div class="services-grid animate__animated animate__fadeInUp">
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-hand-holding-usd"></i>
                </div>
                <h3 class="service-title">Agricultural Loans</h3>
                <p class="service-description">Quick approval crop loans, equipment financing, and farm development loans at competitive interest rates.</p>
                <ul class="service-features">
                    <li><i class="fas fa-check-circle"></i> Instant pre-approval</li>
                    <li><i class="fas fa-check-circle"></i> Minimal documentation</li>
                    <li><i class="fas fa-check-circle"></i> Flexible repayment</li>
                    <li><i class="fas fa-check-circle"></i> Low interest rates</li>
                </ul>
                <button class="service-btn">
                    <i class="fas fa-calculator"></i> Calculate EMI
                </button>
            </div>

            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3 class="service-title">Crop Insurance</h3>
                <p class="service-description">Protect your crops from natural disasters, pest attacks, and weather uncertainties with comprehensive insurance coverage.</p>
                <ul class="service-features">
                    <li><i class="fas fa-check-circle"></i> Weather-based coverage</li>
                    <li><i class="fas fa-check-circle"></i> Pest & disease protection</li>
                    <li><i class="fas fa-check-circle"></i> Quick claim settlement</li>
                    <li><i class="fas fa-check-circle"></i> Premium subsidies available</li>
                </ul>
                <button class="service-btn">
                    <i class="fas fa-umbrella"></i> Get Coverage
                </button>
            </div>

            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-piggy-bank"></i>
                </div>
                <h3 class="service-title">Savings & Investment</h3>
                <p class="service-description">Grow your money with high-yield savings accounts, fixed deposits, and agricultural investment schemes.</p>
                <ul class="service-features">
                    <li><i class="fas fa-check-circle"></i> High interest rates</li>
                    <li><i class="fas fa-check-circle"></i> Flexible tenures</li>
                    <li><i class="fas fa-check-circle"></i> Tax-saving options</li>
                    <li><i class="fas fa-check-circle"></i> Easy online access</li>
                </ul>
                <button class="service-btn">
                    <i class="fas fa-chart-pie"></i> Start Investing
                </button>
            </div>

            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <h3 class="service-title">Digital Payments</h3>
                <p class="service-description">Seamless digital payment solutions for buying supplies, selling produce, and managing farm transactions.</p>
                <ul class="service-features">
                    <li><i class="fas fa-check-circle"></i> UPI integration</li>
                    <li><i class="fas fa-check-circle"></i> QR code payments</li>
                    <li><i class="fas fa-check-circle"></i> Transaction history</li>
                    <li><i class="fas fa-check-circle"></i> Cashback rewards</li>
                </ul>
                <button class="service-btn">
                    <i class="fas fa-wallet"></i> Setup Wallet
                </button>
            </div>
        </div>

        <!-- Loan Calculator -->
        <div class="loan-calculator animate__animated animate__fadeInUp animate__delay-1s">
            <div class="calculator-header">
                <h3><i class="fas fa-calculator"></i> Loan EMI Calculator</h3>
                <p>Calculate your monthly EMI for agricultural loans</p>
            </div>
            <div class="calculator-form">
                <div class="form-group">
                    <label class="form-label">Loan Amount (₹)</label>
                    <input type="number" class="form-control" id="loanAmount" placeholder="e.g., 500000" value="500000">
                </div>
                <div class="form-group">
                    <label class="form-label">Interest Rate (% per annum)</label>
                    <input type="number" class="form-control" id="interestRate" placeholder="e.g., 8.5" step="0.1" value="8.5">
                </div>
                <div class="form-group">
                    <label class="form-label">Loan Tenure (Years)</label>
                    <input type="number" class="form-control" id="loanTenure" placeholder="e.g., 5" value="5">
                </div>
                <div class="form-group">
                    <button class="service-btn" onclick="calculateEMI()">
                        <i class="fas fa-calculator"></i> Calculate EMI
                    </button>
                </div>
            </div>
            <div class="calculation-result" id="calculationResult" style="display: none;">
                <div class="result-amount" id="emiAmount">₹0</div>
                <div class="result-label">Monthly EMI</div>
                <div class="result-breakdown">
                    <div class="breakdown-item">
                        <div class="breakdown-value" id="totalAmount">₹0</div>
                        <div class="breakdown-label">Total Amount</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-value" id="totalInterest">₹0</div>
                        <div class="breakdown-label">Total Interest</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-value" id="principalAmount">₹0</div>
                        <div class="breakdown-label">Principal Amount</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Insurance Plans -->
        <div class="insurance-plans animate__animated animate__fadeInUp animate__delay-2s">
            <div class="plans-header">
                <h3><i class="fas fa-shield-alt"></i> Insurance Plans</h3>
                <p>Choose the best insurance plan for your crops and farm</p>
            </div>
            <div class="plans-grid">
                <div class="plan-card">
                    <h4 class="plan-name">Basic Protection</h4>
                    <div class="plan-price">₹2,500 <span class="period">per acre/year</span></div>
                    <ul class="plan-features">
                        <li><i class="fas fa-check-circle"></i> Weather-based coverage</li>
                        <li><i class="fas fa-check-circle"></i> Basic pest protection</li>
                        <li><i class="fas fa-check-circle"></i> 60% coverage of sum insured</li>
                        <li><i class="fas fa-check-circle"></i> Standard claim process</li>
                    </ul>
                    <button class="plan-btn">Choose Plan</button>
                </div>

                <div class="plan-card featured">
                    <h4 class="plan-name">Comprehensive Cover</h4>
                    <div class="plan-price">₹4,200 <span class="period">per acre/year</span></div>
                    <ul class="plan-features">
                        <li><i class="fas fa-check-circle"></i> Full weather protection</li>
                        <li><i class="fas fa-check-circle"></i> Pest & disease coverage</li>
                        <li><i class="fas fa-check-circle"></i> 85% coverage of sum insured</li>
                        <li><i class="fas fa-check-circle"></i> Priority claim settlement</li>
                        <li><i class="fas fa-check-circle"></i> Free expert consultations</li>
                    </ul>
                    <button class="plan-btn">Choose Plan</button>
                </div>

                <div class="plan-card">
                    <h4 class="plan-name">Premium Shield</h4>
                    <div class="plan-price">₹6,800 <span class="period">per acre/year</span></div>
                    <ul class="plan-features">
                        <li><i class="fas fa-check-circle"></i> Complete risk coverage</li>
                        <li><i class="fas fa-check-circle"></i> Market price guarantee</li>
                        <li><i class="fas fa-check-circle"></i> 100% coverage of sum insured</li>
                        <li><i class="fas fa-check-circle"></i> 24/7 claim support</li>
                        <li><i class="fas fa-check-circle"></i> Bonus for no-claim years</li>
                    </ul>
                    <button class="plan-btn">Choose Plan</button>
                </div>
            </div>
        </div>

        <!-- Financial Tips -->
        <div class="financial-tips animate__animated animate__fadeInUp animate__delay-3s">
            <div class="tips-header">
                <div class="tips-icon">
                    <i class="fas fa-lightbulb"></i>
                </div>
                <h3 class="tips-title">Financial Tips for Farmers</h3>
            </div>
            <div class="tips-grid">
                <div class="tip-card">
                    <h6 class="tip-title">Diversify Your Income</h6>
                    <p class="tip-content">Don't rely on a single crop. Diversify with multiple crops, livestock, or value-added products to reduce financial risk and increase income stability.</p>
                </div>
                <div class="tip-card">
                    <h6 class="tip-title">Keep Accurate Records</h6>
                    <p class="tip-content">Maintain detailed records of all farm expenses, income, and investments. This helps in tax planning, loan applications, and identifying profitable ventures.</p>
                </div>
                <div class="tip-card">
                    <h6 class="tip-title">Build Emergency Fund</h6>
                    <p class="tip-content">Save at least 3-6 months of operating expenses in an emergency fund to handle unexpected situations like crop failure or equipment breakdown.</p>
                </div>
                <div class="tip-card">
                    <h6 class="tip-title">Invest in Technology</h6>
                    <p class="tip-content">Modern farming equipment and technology may require initial investment but can significantly increase productivity and reduce long-term costs.</p>
                </div>
            </div>
        </div>

        <!-- Government Schemes -->
        <div class="government-schemes animate__animated animate__fadeInUp animate__delay-4s">
            <div class="schemes-header">
                <div class="schemes-icon">
                    <i class="fas fa-landmark"></i>
                </div>
                <h3 class="schemes-title">Government Schemes</h3>
            </div>
            <div class="schemes-list">
                <div class="scheme-item">
                    <div class="scheme-info">
                        <h6>PM-KISAN (Pradhan Mantri Kisan Samman Nidhi)</h6>
                        <p>₹6,000 per year direct income support to small and marginal farmers</p>
                    </div>
                    <button class="scheme-btn">Apply Now</button>
                </div>
                <div class="scheme-item">
                    <div class="scheme-info">
                        <h6>Kisan Credit Card (KCC)</h6>
                        <p>Credit facility for farmers to meet their production needs and other requirements</p>
                    </div>
                    <button class="scheme-btn">Apply Now</button>
                </div>
                <div class="scheme-item">
                    <div class="scheme-info">
                        <h6>Soil Health Card Scheme</h6>
                        <p>Free soil testing and nutrient recommendations to improve soil health and productivity</p>
                    </div>
                    <button class="scheme-btn">Apply Now</button>
                </div>
                <div class="scheme-item">
                    <div class="scheme-info">
                        <h6>PMFBY (Pradhan Mantri Fasal Bima Yojana)</h6>
                        <p>Crop insurance scheme providing coverage against crop loss due to natural calamities</p>
                    </div>
                    <button class="scheme-btn">Apply Now</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function calculateEMI() {
    const principal = parseFloat(document.getElementById('loanAmount').value);
    const rate = parseFloat(document.getElementById('interestRate').value) / 100 / 12;
    const tenure = parseFloat(document.getElementById('loanTenure').value) * 12;

    if (principal && rate && tenure) {
        const emi = (principal * rate * Math.pow(1 + rate, tenure)) / (Math.pow(1 + rate, tenure) - 1);
        const totalAmount = emi * tenure;
        const totalInterest = totalAmount - principal;

        document.getElementById('emiAmount').textContent = '₹' + Math.round(emi).toLocaleString('en-IN');
        document.getElementById('totalAmount').textContent = '₹' + Math.round(totalAmount).toLocaleString('en-IN');
        document.getElementById('totalInterest').textContent = '₹' + Math.round(totalInterest).toLocaleString('en-IN');
        document.getElementById('principalAmount').textContent = '₹' + principal.toLocaleString('en-IN');

        document.getElementById('calculationResult').style.display = 'block';
        document.getElementById('calculationResult').scrollIntoView({ behavior: 'smooth' });
    } else {
        alert('Please fill in all fields with valid numbers.');
    }
}

// Service button handlers
document.querySelectorAll('.service-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        const cardTitle = this.closest('.service-card')?.querySelector('.service-title')?.textContent;
        if (cardTitle && !this.textContent.includes('Calculate')) {
            alert(`${cardTitle} service will redirect to detailed application form.`);
        }
    });
});

// Plan selection handlers
document.querySelectorAll('.plan-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        const planName = this.closest('.plan-card').querySelector('.plan-name').textContent;
        alert(`You selected ${planName}. Redirecting to application form...`);
    });
});

// Scheme application handlers
document.querySelectorAll('.scheme-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        const schemeName = this.closest('.scheme-item').querySelector('h6').textContent;
        alert(`Redirecting to ${schemeName} application portal...`);
    });
});

// Auto-calculate EMI on input change
['loanAmount', 'interestRate', 'loanTenure'].forEach(id => {
    document.getElementById(id).addEventListener('input', function() {
        if (document.getElementById('loanAmount').value && 
            document.getElementById('interestRate').value && 
            document.getElementById('loanTenure').value) {
            calculateEMI();
        }
    });
});
</script>
{% endblock %} 